<project xmlns:ivy="antlib:org.apache.ivy.ant" xmlns:unless="ant:unless">
    <description>
        Example project applying gradle conventions to ant.
    </description>
    <basename property="ant.project.name" file="${basedir}"/>
    <property name="ivy.version" value="2.4.0"/>
    <property name="build.dir" location="build"/>

    <target name="clean">
        <delete dir="${build.dir}"/>
    </target>

    <target name="init">
        <mkdir dir="${build.dir}"/>
    </target>

    <target name="install-ivy" depends="init">
        <local name="ivy.dir"/>
        <local name="ivy.file"/>
        <local name="ivy.available"/>

        <property name="ivy.dir" location="${build.dir}/ivy"/>
        <property name="ivy.file" location="${ivy.dir}/ivy-${ivy.version}.jar"/>
        <available file="${ivy.file}" property="ivy.present"/>

        <mkdir unless:set="ivy.present" dir="${ivy.dir}"/>
        <get unless:set="ivy.present" dest="${ivy.file}" 
            src="http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/${ivy.version}/ivy-${ivy.version}.jar"/>

        <taskdef resource="org/apache/ivy/ant/antlib.xml" uri="antlib:org.apache.ivy.ant" classpath="${ivy.file}"/>
    </target>
</project>
